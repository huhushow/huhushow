<!DOCTYPE html>
<html lang="ko">
<head>
        <meta charset="utf-8" />
        <title>Using commend line parameter in ansible_playbook</title>
        <link rel="stylesheet" href="https://huhushow.github.io/huhushow/theme/css/main.css" />
        <link href="https://huhushow.github.io/huhushow/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Huhushow's Blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://huhushow.github.io/huhushow/">Huhushow's Blog </a></h1>
                <nav><ul>
                    <li><a href="https://huhushow.github.io/huhushow/pages/about-me.html">About me</a></li>
                    <li class="active"><a href="https://huhushow.github.io/huhushow/category/dev.html">Dev</a></li>
                    <li><a href="https://huhushow.github.io/huhushow/category/diary.html">Diary</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://huhushow.github.io/huhushow/using-commend-line-parameter-in-ansible_playbook.html" rel="bookmark"
           title="Permalink to Using commend line parameter in ansible_playbook">Using commend line parameter in ansible_playbook</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-02-25T12:30:00-05:00">
                Published: 목 25 2월 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://huhushow.github.io/huhushow/author/huhushowgmailcom.html">huhushow@gmail.com</a>
        </address>
<p>In <a href="https://huhushow.github.io/huhushow/category/dev.html">Dev</a>.</p>

</footer><!-- /.post-info -->      <p>예전에 만든 ansible 배포 스크립트는 소스를 FTP로 받아오는 방식이었다. 그러다보니 버전별 배포가 복잡해져서 타겟 소스를 Git을 통해 받아오는 방식으로 바꿨다. Git clone 하는거야 ansible에 git 모듈을 이용하면 간단하다. 특정 tag등을 지정하기 위해서 커맨드라인 변수를 받아오는것도 간단한데 유용할듯 해서 남겨본다.</p>
<script src="https://gist.github.com/huhushow/639a417cf2b5bb33b783.js"></script>

<p>변수의 경우 jinja2 탬플릿 문법을 사용하는데 필터를 사용해서 변수에 대한 여러 처리를 해줄 수 있다. "{{ ver | default('develop') }}" 의 경우 ver 이라는 버전에 대한 변수가 없을 경우 기본값으로 develop 브런치를 가져오록 한 것이다. 변수를 문자열로 처리했는데 이는 YAML syntax의 dictionary 표현법인 { 떄문이다. 이렇게 플레이북을 작성했다면 다음과같이 실행시킬 수 있다.</p>
<script src="https://gist.github.com/huhushow/b5f5d6c7445025b90a6e.js"></script>

<p>간단한 키-값 형식 또는&nbsp;JSON 형식을 사용할 수 있다. json 형식으로 저장된 파일을 읽어올수도 있는데 그럴 경우 @ 마크로 파일임을 표시한다.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="http://huhushow.tistory.com/">Old blog</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://huhushow.github.io/huhushow/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-85613459-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>